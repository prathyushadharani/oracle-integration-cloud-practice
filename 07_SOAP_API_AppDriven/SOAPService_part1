build soap service in oic
usecase: build a soap service in oic which takes string name as input, prefix hello and send it back as response

1)create trigger conn with soap adapter

trigger conn determines:
whether your integration is exposed as soap or rest
what request payload needs to be passed to invoke integration

build the integration

activate the integration

test the soap service wsdl using soap ui

we are doing this simple usecase to understand how a soap service works in oic


WSDL:

1) abstract wsdl 
2) concrete wsdl 

step 1: create required conn
do we need to talk to external systems? NO

UG86 Hello World SOAP Conn-Role: Trigger

in REST trigger conn we only provided security details(oAuth 2.0) while configuring rest trigger connection-
which means we did not provide any connection details while configuring the REST conn

and while using the rest conn as trigger conn we have given the connection properties like endpoint uri etc,
request payload, response payload

which means if you change the name of ug86 hello world rest conn to ug86 rest conn
then you can use this rest conn for another PO integration or AR invoice with different input and output
bcoz input and output that is request and response are configured in integration in the trigger conn
not in the conn itself

so how many times can you use the REST Conn? multiple times.

but thats not the case with SOAP connection.

transcript notes:

actually theation depending on the use case, if it is a word dur receive person and by reading, if it is purchase or API, you receive PO details and you send back PO Hity. If it is AR voice, you'll receive invoice details, you send back AR in voice ID But that is not the case with a soap services. In the case of soap connection, I cannot just heat the test button without entering the connection properties. I definitely have to enter the connection properties. And I need to enter either a concrete whistel URL or you need to upload an abstract whistel file. I've introduced two new terms concrete whist celluaral, abstract wasel file. Now, what's the story with these whistors? Let me just close all of our tabs. A humid have created PL sequel packages earlier, right? So when you create a PL sequel package, what is it that we normally do? We create a specification first and in the specification, you will just mention what procedures or functions you want to implement and you would mention the input parameters output parameters and but you won't have any calculation logic, or you won't have the implementation logic in the specification. But in the package body, in the package body that is where you mention, the package body that is where you mention, all done. This is where you mention, all the implementation logic. This is where you mention all the implementational logic. In an exactly similar fashion, when you create an answer, for example, if you are doing tax calculation package, you might have a procedure to calculate tags wherein you pass in amount and tax rate as input you get the tax amount as output. You have input parameters you have output and when you in the specification, you would just have the syntax, the procedure name, input output parameters, and it is in the PL sequel body. That is where you plug in the calculation logic, where you sayaxon equal amount into tax rate by hundred and you send this tax amount back. in an exactly similar fashion, when you build a So Quip service, you can create a specification for a so web service in the form of a file and that is what we normally called as abstract w. That is what we normally call as abstract whistle, and why is it called as abstract? Because in this weistel file. So this is like a specification or a file wherein you are just mentioning what operations you want to implement and to those operations you have request response message is attached and in those request response messages that are custom data types define it attached. So when you build a soate service, you can start off your integration using an abstract whistel file, which is nothing but a specification for a soip service. And let me show you how that abstract whistel file is going to look like. I did share this with you in a material photo. You have greetings.tel file. And if you see here in this wistel file, remember, it is nothing but a specification for a so service wherein I just created a text file save every as whisttel and here I'm mentioning what are the operations that I want to implement? Let's say I want to implement two operations, greeting and greeting too.. You have the operations here. What operations do you want to implement and again, for each operation, you have input and output and to the input and output of the operations. We have the request and the response messages attached. Okay. And you see that this request and the response messages are defined before this and in the request message, you cover, do you have a dat type attached first datype and in the response message, you have response dat type attached. And in the request and response dataatypes, you have, you have the exAC attribute support attribute you want to receive our input, you have that list here and what attributes you want to send back in the response? You have that list here. So what is it doing in this appract to us? It is basically a file, a specification for a SPI service where you just mentioned what operations do you want to implement and to the operation you attach messages. And in those messages, use data types and those dataat types, you define as a first step. Those are dat types you define as a first step, mentioning the required contributes within. So you have custom datypes to find. The first responds dat types, and those dat types are attached to opt messages. And those messages are attached to Operation under a portype element, and you also have a finding here. But what is one important thing missing in this abstract to list guys? I said, I want to receive first name and I want to send back greeting. But do you see an implementation logic here wherein we are prefixing hello to the first name and sending it or sending it to the greeting? Do we have the implementation logic? We don't have it, right? So that is why this is called as an abstract a st. You will not have in the abstract whist still, you will only update a type messages operation and a binding, but you won't have the service details. You don't have the implementation and details. That would be missing. That would be missing. So whenever you will when you build a soap web service, you can start off your soap PI service with an abstract postel pyp required and after you have a specification ready, similar to what apps has shown you, you can go ahead and make use of any dictation product Could be so or could beel could be or could be OC And you can implement that web service by using any integration product and will be using OYC to do that. So we'll use the abstract still as a starting point in the connection, then we build an integation in OYC and after we build an integration and activate it, there would be atern URL- generated. And that is what we call as a concrete whistle. So let's see how to convert the abstract to a still finding to concrete whistle, you varal by Billy an impignation in OIC. So if I go back to the connection in the connection, there are two things that I can upload, I can upload an abstract postel file or I can use a concrete whistel URL itself. and in this particular indignation, in this integration, I'll show you how to use abstract weel file and when we do the journal input service and when we do few integrations later on, when we do when we build other soap services down the line, I'll show you how to use a concrete twistel you in the soap tricker connection. A couple of important points guys. If you build hundred integrations in OIC, if you build hundred integrations in OIC hardly three or five services, hardly five or three to five integrations, you would create a soap service. If you build hundred, only three or four of them would be soap and out of hundred soap services you will in 99% of them, you would use the concrete whistel Yaral in a soap trigger connection in a soap trigger connection. You use concrete whistles, 9 to 9% of the cases. In playlist of the rail cases, we use abstract whistage file. In very rare cases, we use abstract wistel file in a soap trigger connection. First of all, building a soap service itself is very, very fairare. We normally build done as KPIs. And among hundred soap services, we build 99% of them we use concrete were still in the trigger connection, and that is ideally the best trackp. But in rail cases, we use abstract weistel. Now, how does a congrete wristle in a trigger work and why is it a best practice? What is that odd scenario where we use abstract was still filed in a soap trigger connection? I'll answer all these questions in detail when we do the journal input service. I'm not going to answer any, any of those questions in today session because even if I explained it, I'm 100% sure you won't understand it. Okay, so we would be covering why Congrete wasel is a best practice. Why do we use a 99% of the cases? What is that odd scenario where we use abstract? We still? And what are the disadvantages of using abstract twistle when compared to URL, who's still URL will cover all of that in detail in the journal input service. In this integration, I shoulder just understand how we can make use of an abstract to a strif file, but please note that we use it very, very, veryly and you don't need to create an abstract your cell file. I've already shared an abstract was still in the medieval folder. You can directly pick it up from where. Or you can even come to my connection and you can download the wisted file from here and we have a security policy and a for a soap trigger connection security policy gets Caulted as used in passport token. I'm going to leave it that way. We already have seen how basicot works and how coart works and into recession. We'll see how they use an impass token. So in a so trigger connection, this would be the default Let's see how it works. I test the connection. Precession worlds and pass to And we have a security policy or you can even come to my connection and you create an abstract to cell file or we can make use of an abstract to a steel file, but please note that we use a very, very, veryly. and you don't need to create an abstract your steel file. I've already shared an abstract was still in a medieval folder. You can directly pick it up from there. Or you can even come to my connection and you can download the Wisted file from here. and we have a security policy and a for a soap trigger connection, security policy gets speedfaulted as used an in passport token. I'm going to leave it that way. We already have seen how basic earth works and how coart works and are into recession. We'll see how they use an impassport token works. So in a so trigger connection, this would be the default on see how it works. I test the connection.. And after we test the connection, what do we need to do? We go back and save it. It's time for me to build the integration. Integration is simple and straightforward. I'll create an integration using application style because client would trigger it from another application and I call it as a world soap collection created. And I'm going to use that soap connection as a trigger in the restapia. We use rest connection in a soap, we use soap and we call it as say hello and our world soap connection cremated and I'm going to use that soap connection as a trigger in the restap here. We use rest connection in a soap we use soap and we call it a say hello. And at the moment you use a soap connection, remember this is a soap connection that I have used. This is a soap connection that I have created Looks like people are the connection at their end. I'm changing the privilege of you are the one from 82 on you. I'm going to unmark it. I'm here. So when you in a soap trigger connection, in a soap trigger connection, we uploaded. You would enter either a wtern UVL or you would upload a whistel file. So you would have a whistle here. It could be a URL or a file. And what OSC will do the moment you use that connection, it would scan that whistle. and that whistle could be a UR a lot of file. And whatever operations that you have in that whistle, you will see them you know, and how many operations we had in this was still guys, this is our strike whistle that I uploaded, right? How many operations we have here? Two operations. Greeting and greeting to two operations. And those are the two operations that you are seeing here. Now, they are basically the same operations and the reason I have copy pasted it is, I just want to show you how multiple operations would show in the top on here. So again, the moment you select an operation, what would happen is the moment you select an operation, that operation would have an input message and that operation would have a message attached to the output. So this operation that you're selecting has a request and the response message attached and that request and the response message, that request and the response message would become to the request, would become the request, and the response for the integration. So the moment I choose operation, to the operation, agreed request is assigned as an input greek response is the response and if you scroll up, to these messages, you have data types assigned and in the request datype, you have first name as input in the response, you have greeting so this operation that I'm selecting guys. this operation that you're selecting in a so tri connection, this is like we telling OIC or autus selection, basically determines what would be correct was payload for R integration and what would be the response payout for your integration. The moment I selected greeting, first name becomes a request payload and greeting becomes a response payload because that is what you see in these two messages. So whether you pick up an operation from an abstract whistle or from a concrete whistle, the behavior would be same, that operation would have a message attached, and that message would have a datypes are sign. And that request and response that we need that we have from our operation becomes a request and response for your message. And you know very well what happens when you configure a request, you know very well, what happens when you configure a trigger connection with a response in it. Here I selected an operation where you have person response. The moment I hit finish photo OC. Would it only configure the trigger note or does it also do something else? It configures a trigger note And since I picked up an operation in the trigger, which has a response, it's aa, let me help you operate here. It would automatically generate a response element and yes, you' received first name, here, you're sending Brad creating here. Will you be cur over ICC I'd also make it more easier for you, so it would also generate a map of the moment you configure a trigger both our response payload in it, this T all behavior, you notice, you notice it an element and the map the automaticically to the indictation. And when you go into the map, in the mapapper, what do we see? We see the first name on the source and we see the creating of Nat empis straightforward. Do you map it? But I don't want to map the first name to create Iaziz. Instead, I want to use a contractation so I say hello space. I'm congatinating hello spaceace to the first name and I' I it to a greeting. and the integration is in draft status. What do I need to do to change it to a confibate state-b This tells us how many are exactly practicing. In April 13th Enable tracking and after the go do I do status is configured. Would I be able to? Yeah, I will be able to activate it now. And one important point that I want to extend here is so when you activate it as API, when you activate a API, what would happen is you see a R standpoint you are a generated when I with a arrest API. Are you going to run? I see an option to I see an option to test the rest API directly within O IC instance. It is prompting me to enter the first name. And after they enter the first name, I should be able to test the APA directly. I can do the unit testing of the rest Alay from within OIC instance itself, and after that I can send the NP youRL with a third-part. And but in case of soap service, in case of soap service in case of so service, what is it that we need to do in case of soap service? The moment you activate the integration going into the menu options, it doesn't say a rhyme. It says run details. It says run details. The moment you cl on run details, what is it up we see? We see our weal yaral generated. And first of all, do you guys see an option to the soap service within OIC instance? We don't have an option. We don't have an option to test the soap service directly within OS instance it is not possible. Instead, the moment you activate a soap service, there would be a whistle you are and generated. There would be a whistston you are't generative. And it is this whistle that you have to use. You would be passing on this whist and you've added to the testing to the client. But before we do that, we need to do a unit testing to understand if it really works. But unfortunately, if it is arrest API and test it within OIC, if it is a soap service, I have to rely on testing tools. I don't have a choice. And how do we how do we which testing tool can we use to test the soapervices, guys? So, right. And before I go to soapyware and add it in, remember, we see this whiston daral. We see the U is still UarL EO. Now, what is it that we did in the last 10 minutes? We converted. What did we do in the last 10 minutes? A we converted abstract wasile. We converted this abstract was still file. into a concrete Western Ivar by building an integration in our I see, we use the substrap crystal file, in a soap trigger connection, and we have created the syntegration, and in this integration, I collect in the required logic to fix all over with the first name I sent it to greeting. And when I activated this integration, there is a UR agendator, and this is what we call, this is what we call as a concrete wisdom. So this is abstract twistel, and this is concrete whistle. What's the difference between these two in concrete whistel? Also, see in abstract crystal, we have four elements like, we have dat types. You have the types in concrete as well, you have the types. And in Appstract twistle, you have messages. Those messages are also available and an abstract will tell you have Oty an operation. We have the same thing here. We have a p-type and we have an operation. And after that, we have a binding ear, we do have a binding ear as well. So apart from apart from Atis, apart from a datype, you have datypes, message, operation we can a protype I mean the first four elements. The first four elements are also there in the abstract question. But what is one additional thing that you see in a concrete whistor, one was that you same concrete whistle is a survey stack. And this is where you have the endp you are a details. Remember, concrete whistle URL is an implemented web service. This is like just like a specification variant you are writing on what you want to implement, but you go to integration product implemented, then you activate that integration, then you get the endpoint youR and that is what you call usA concrete is still in the concrete whistel, you are we details. concrete still, it would be in the form of a URL, would be in the form of a URL, I can call it. And when I call it whis going to answer my phone call, it is the soap service that we are built and deployed in that instance. It is the soap service built and deployed in UG86 project in Eig production IC instance. If I call the service, this integation would respond to it so let's copy this. I copy I TelarL. All this service and deployed in matter instance that offer a URL I can call it. And when I call it, who's going to answer my phone call it is the soap service that we have built and deployed in that instance. It is the soap service built and deployed in UG86 project in you know the production of Y instance. If I call the service this integration would trust to it. So let's copy this. I copy that I tellL and I call and add it to the folder and let's hope you I create sample request. Let's soap you I create sample request I added to a wrong one I'm going to hand it here and get. Now, what is it that we see, we see that there is a sample request paid or generated. We see that there is a sample request payo generated for the soap service. And what is it prompting me to enter? It is prompting me to enter the first name. It is prompting me to enter the first name. And yes, I'm trying to call IUG86 soap service in the production IC instance. It is counting me to enter the first name. What's the first name that you enter? So for example, I say. And I need to pass an authentication details. Now, what do you know from yesterday's session base? Whenever you call an integration inYC, where do you need to check for the authentication policy or security policy? When you call. you the trigger connection. Remember, you might use 10 connections in the integration with specific connection you need to check. Always integration trigger connection is what you need to check. And in that trigger connection, you have a security policy and this will tell you in what format you have to pass an authentication details. Now, if I have promptly selected Basi, if I have probably selected Basic, then I could have entered the user and password. I could have entered the username and password as a basic call. If I have probably changed a security policy to basic, this would have worked. But what is a security policy by default is for a sore trigger connection it is used in a passport to and since it is used an in passport token, if I pass in the if I pass in the credentials as a basic authenticication, do you think it would work, I There is a mismatch, right? I said, I won't be passing in. Here I'm saying, oh, I say that I'll be passing in, passing in the usernonym and passport in the form of a token. That's what I'm saying here. But here I'm passing in use and passport as a basic. Do you think it would work? You send a request and when you send a request, you don't see anything, you' slightly confusing, but you are an XML target. If you click on the wrong, you see the problem. You understand what is the problem. What is the problem that you see? You see unauthorized. You see unauthorized. You see unauthorized here. So even though, yes, I'm entering the actual usonym and possible for or instant, but I'm still getting this issue, because here I said, I'll pass a usonym and password in the form of a token, not basic if I probably changed it to basic this would have worked. So I need to generate a token with a username and passport that happened to here. And where do I include it? That is exactly where smokeheader comes into picture. Remember a soap header section is meant to include authentication token, so you go to soap header, right click, say, addWSS, use an in token add WSS Use an M token. And when you add a token, a generate a token, you can generate a token, exposing the password that you have ventered here as a text or you can hash it or you can hash it. So if you generate a token using a hashing the password, hashing the password, so you would be able to see that there is a token generator with a username and password that I entered here. And if I scroll to the right, you will be able to see the password. This is not my actual password, but this is this is the hashed password that we see. So what is it that we normally do? We normally generendate to this with a hashed password in it? And we share it to the third parties and ask them to use it to trigger a vapN so it trigger our soaps of these. But there is some problem in our ways he instance where it's the hashhed parts, hashed passwords, has passwords are not working, are because of a problem in thei instance, but in real time instance, you should not have any problem. When you use a hatched passport, it should work. Okay, so when you use a hatched pass, included to, and it should work. But in this in this voice, in instance, we're getting a problem. When we use hhed password. But ideally, you wouldn't have this problem in real time. But what I would do is instead of using hat to password Inst instead of using hash to password, what I wrote to was. I would generate it token exposing the password as a text, meaning if I scroll to the right, my password is exposed my password is have it as a text here. It's justed as a normal text, but the token or will use an I password as a text. would work and if I co-here send that it was full to you see. You see an immediate response coming back and I passed in you know I in I back, you know gs in the response, which means the SOap service is working has expected. Yes, here I generated a token exposing the password button in real time. We generated a token, digesting the password or hashing the password and that token reach it with a third party. And we asked them to use it when they figure of integration. And if I go back into observability screen, would I be able to see the trick first ph? Would I be able to see this request in observability screen?? I should beG within the project itself, you have an observed screen and if you go in there, you should be able to see the soap service and you can see that this particular service is triggered and that to be request on because we didn't pass in the authenticication details and I required format And if you click conf first then, you will be able to see what has happened within the integration. Now, if you, I already shared this abstract we're still fine with you. I already shared this abstract was still fine with you. And I'll stress on these two points one more time. When you build hundred integrations in OIC hardly three or four integrations, you create us. So everything else you create as the rest. And out of hundred soap services as you opened 99%, we use concrete whistards, and that is a best track piece. Very rate cases, we use abstract twistister. But I still want all of you to be aware of how to use abstract twiststal so that if you encounter that race scenario tomorrow, you would know how to use abstract twistle in a soap rigger connection, but what are those Y cont whistle is a best track is? What are the odd scenarios where we use abstract to stall I explanatory detail when we do the journal input service because when you have a use case in front of you, it' be easy for you to understand. Why't it is a best practice. An abstract was still, I always shared a sample with you. You can use this answer when you practice, but if you want to create abstract to still also from scratch, you have plenty of online editors available. If you just go to Google and type in abstract who and generator, you have a lot of tools available, but you just go to any of the tool, enter the inputs outputs, give a name to the operation messages, it would automatically generator the self file. Otherwise, if you have Jet over the per install, if you have JO the P install, you can also create an abstract to a cell file using a JD or paraspole, So I've given a link in slight number of over, go to that link, and in this link, it's an old link, but it's still holds COVID. You can open your head all above. You have screenshots on Lvenji, you can even if you have a Jer 2C or the latest version, use the process is same, Open J create a project and in the project, you create a schema document first XML schema, where you configure the dat types. And here you mention what is the input and what is our output? Just for example, if you are building an employee, API, you want to take an employee ideas input n us output, you configure it. I mean, define the datype first, then you create a dist document, and in the B document, you would be configuring this. You would be confuring the operation and you attach and you also define input and output for the operation. You also define input in the output for the operation. And after that, you would also be adding them messages. You would also be having them messages for the input and output. Okay, so after you after you define a project without Gavist documenting Ja, you can just do a right click and export it. And that would give you this abstract was terrifying. two or three important points about a trigger connection race, a trigger connection that you have in an indicication will determine three things. So the trigger connection that you use in the indication won't it from mi, a trigger connection won't it from mine. In what, whether your integration gets exposed as so far rest, tell me one thing is when I activated this integration, there is a rest in 0.1 generated and when I activated this integration, when I activated this integration, it created a stickal. Now, tell me one thing as who was told OYC that I'm trying to print rest here and I'm trying to build swap here? Do you think it looked at the name to decide it? Even if you don't have an estate here and soap service in the name, even if you don't have an estapia and soap service in the name, the behavior would have been exactly the same. So how is OC deciding whether to expose integuation as so progressed? It felt? Yeah, it would look at the trigger connection, and in the trigger connection, based on the trigger connection adapter, OYC would decide whether to expose it as a soap or a guest. So in this case, I use this connection, and another one soap connection and in that connection, we have a soap and I have to use. That's why when I activated it integration, it is exposed as soap this is exposed as stressed. And what is the other thing that the trigger connection will determine? Trigger connection security policy, who wouldn't determine how you passing authentication details when we did basic authenticity into to work, only after I include a to and it started working. And also when we tested the rest AP yesterday, initially, we have seen how the basic art works and then we have seen how Koth works. So the trigger connection security policy is going to cunt control in what format you pass an authentication details when you trigger a surveys. Very important point as I see even experienced integration specialists with two to three years of experience. They play inky pinky pky when they are trying to trigger the service size when it comes to passing, passing the credentials. They would first try BasicC if it doesn't work, then they try token. If it doesn't work, then they try what. Absolute rubbish, guys. You need to have absolute clarity in what you're doing. Whenever you trigger an integration, if I ask you, where do I know in what format I have to pass in the credentials? What's so handsome? Don't do trialland error. Go straight to the integration. Go to the trigger connection, and in the trigger connection, you have a security policy that tells you in what format you have to pass an authentication details. Okay, since I said use an impassful token, I I had to include the token here. Okay. And what are the other details that we have? using an in password? The third important thing that that trial connection would did minus, it would control what is a request and response payrolls for service. So in case of R AP, if it is a R AP that you're building, when you configure the rest trigger in the integration, here itself, you mention the right request and response pay. Here itself, you mention the request response payloads. And if it is a and if it is a soap trigger connection, if it is a soap trigger connection, what do you do you would mention the security policy. You would mention the security policy here. Sorry, you would, if it is a soap connection, you would mention a we still, you are a lot of we still trying and when we use that connection in the integration, you choose a specific operation and that operation built it from mine, what would be the request and response payouts by your service? Any questions, Grace, for anyone? Any questions from anyone? Your So we use, we use authentication by default or in the real time also and so far for period using impassse to in by default. Correct.. There's So it means if we need to build 10 soap integrations, then we need 10 different connections, right? Absolutely. You have nailed it.. Any other questions? We'll stop the effort today is in Monday session. We will cover the miscellaneous options and then we get started with 30 decation use kits. Thank you.


